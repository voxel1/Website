<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Something</title>
<link href="https://fonts.googleapis.com/css2?family=Anta&display=swap" rel="stylesheet">
<style>
:root {
  --text-color: #fff;
  --header-color: #fff;
  --header-hover: #ffcc00;
  --card-bg: rgba(0,0,0,0.7);
  --card-bg-hover: rgba(0,50,100,0.7);
  --card-border: #222;
  --card-border-hover: #00ccff;
  --page-bg: #000;
  --canvas-bg: #023e8a;
}

body {
  font-family: 'Anta', sans-serif;
  background: var(--page-bg);
  color: var(--text-color);
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

canvas { position: fixed; top:0; left:0; z-index:-1; }

header {
  text-align: center;
  padding: 2rem;
}

header h1 { margin-bottom: 0.5rem; color: var(--header-color); }
header p { margin-bottom: 1rem; }
#searchBox {
  padding: 10px;
  border-radius: 5px;
  border: none;
  font-family: 'Anta', sans-serif;
  width: 250px;
  margin-bottom: 2rem;
}

.games-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
  justify-items: center;
  padding: 0 2rem 4rem;
}

.game-card {
  min-width: 200px;
  max-width: 220px;
  background: var(--card-bg);
  padding: 1rem;
  border-radius: 12px;
  cursor: pointer;
  transition: transform 0.2s, background 0.2s, border 0.2s;
  border: 1px solid var(--card-border);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.game-card img {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 0.5rem;
  transition: transform 0.2s;
}

.game-card:hover img {
  transform: scale(1.05);
}

.game-card:hover {
  background: var(--card-bg-hover);
  border-color: var(--card-border-hover);
}

.game-title {
  color: var(--header-color);
  font-size: 1.2rem;
}

.game-title:hover {
  color: var(--header-hover);
}

#gameContainer {
  display: flex;
  justify-content: center;
  margin-top: 2rem;
}
.game-wrapper {
  width: 80%;
  background: var(--card-bg);
  border-radius: 10px;
  padding: 10px;
}
.back-button {
  display: block;
  text-align: left;
  margin-bottom: 10px;
  cursor: pointer;
  color: var(--header-color);
  font-size: 1.2rem;
}
.back-button:hover {
  color: var(--header-hover);
}
</style>
</head>
<body>

<canvas id="starCanvas"></canvas>

<header>
  <h1>Games | New games monthly! ❤️</h1>
  <p>If you get caught using this website during school hours, it's not my responsibility. Click a title to load/unload a game!</p>
  <input type="text" id="searchBox" placeholder="Search games...">
</header>

<div class="games-grid" id="gamesList">
  <div class="game-card" data-folder="repo">
    <img src="repo.png" alt="Repo">
    <div class="game-title">Repo</div>
  </div>
  <div class="game-card" data-folder="undertale">
    <img src="undertale.png" alt="Undertale">
    <div class="game-title">Undertale</div>
  </div>
  <div class="game-card" data-folder="undertale-yellow">
    <img src="undertale-yellow.png" alt="Undertale Yellow">
    <div class="game-title">Undertale-Yellow</div>
  </div>
  <div class="game-card" data-folder="deltarune">
    <img src="deltarune.png" alt="Deltarune">
    <div class="game-title">Deltarune</div>
  </div>
  <div class="game-card" data-folder="thats-not-my-neighbor">
    <img src="neighbor.jpeg" alt="That's Not My Neighbor!">
    <div class="game-title">That's Not My Neighbor!</div>
  </div>
</div>

<div id="gameContainer"></div>

<script>
// Star Canvas
const canvas = document.getElementById("starCanvas");
const ctx = canvas.getContext("2d");
function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener("resize", resizeCanvas);
resizeCanvas();
const stars = [];
for(let i=0;i<150;i++){
  stars.push({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    radius: Math.random()*5,
    dx: (Math.random()-0.5)*0.5,
    dy: (Math.random()-0.5)*0.5
  });
}
const mouse = {x:null, y:null};
window.addEventListener("mousemove", e=>{mouse.x=e.clientX; mouse.y=e.clientY;});
function drawStars(){
  ctx.fillStyle = "var(--canvas-bg)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  stars.forEach(star=>{
    let dx=star.x-mouse.x;
    let dy=star.y-mouse.y;
    let dist=Math.sqrt(dx*dx+dy*dy);
    if(dist<100){ star.x+=dx/dist; star.y+=dy/dist; }
    ctx.beginPath();
    ctx.arc(star.x,star.y,star.radius,0,Math.PI*2);
    ctx.fillStyle="#fff";
    ctx.fill();
    star.x+=star.dx;
    star.y+=star.dy;
    if(star.x<0||star.x>canvas.width) star.dx*=-1;
    if(star.y<0||star.y>canvas.height) star.dy*=-1;
  });
  requestAnimationFrame(drawStars);
}
drawStars();

// Game loading
const gameCards = document.querySelectorAll('.game-card');
const gameContainer = document.getElementById('gameContainer');
let currentGame = null;

gameCards.forEach(card=>{
  card.addEventListener('click', async ()=>{
    const folder = card.dataset.folder;
    if(currentGame===folder){
      gameContainer.innerHTML='';
      currentGame=null;
      return;
    }
    try{
      const res = await fetch(`${folder}/index.html`);
      if(!res.ok) throw new Error('Game not found');
      const html = await res.text();
      gameContainer.innerHTML = `
        <div class="game-wrapper">
          <div class="back-button" onclick="gameContainer.innerHTML=''; currentGame=null;">⬅ Back to games</div>
          ${html}
        </div>`;
      currentGame=folder;
    }catch(e){
      gameContainer.innerHTML = `<p style="color:red;">Failed to load ${folder}</p>`;
      currentGame=null;
    }
  });
});

// Search bar
const searchBox = document.getElementById('searchBox');
searchBox.addEventListener('input', ()=>{
  const filter = searchBox.value.toLowerCase();
  gameCards.forEach(card=>{
    const title = card.querySelector('.game-title').textContent.toLowerCase();
    card.style.display = title.includes(filter)?'flex':'none';
  });
});
</script>

</body>
</html>
